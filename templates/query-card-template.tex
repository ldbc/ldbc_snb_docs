\renewcommand*{\arraystretch}{1.1}

\subsection*{ {{- workload }} / {{ operation }} / {{ number -}} }
\label{section: {{- query_id -}} }

% change \emph{} to use sans-serif font
\let\oldemph\emph
\renewcommand{\emph}[1]{\footnotesize \sf #1}

{% if workload == "BI" -%}
\renewcommand{\currentQueryCard}{ {{- number -}} }
\input{query-cards/bi-navbar}
{% endif -%}

{%- if workload == "Interactive" and operation == "complex" -%}
\renewcommand{\currentQueryCard}{ {{- number -}} }
\input{query-cards/interactive-navbar}
{%- endif %}

\noindent\begin{tabularx}{\queryCardWidth}{|>{\queryPropertyCell}p{\queryPropertyCellWidth}|X|}
	\hline
	query & {{ workload }} / {{ operation }} / {{ number }} \\ \hline
%
	title & {{ title }} \\ \hline
%
	pattern & \hfill\includegraphics[scale=\patternscale,margin=0cm .2cm]{patterns/{{ query_id -}} }\hfill\vadjust{} \\ \hline
%
	desc. & {{ description }} \\ \hline
%
	{% if parameters %}
		params &
		\innerCardVSpace{\begin{tabularx}{\attributeCardWidth}{|>{\paramNumberCell}c|>{\varNameCell}M|>{\typeCell}m{\typeWidth}|Y|} \hline
		{% for entry in parameters -%}
			$\mathsf{ {{- loop.index -}} }$ & {{ entry.name }} & {{ entry.type }} & {{ entry.description }} \\ \hline
		{% endfor -%}
		\end{tabularx}}\innerCardVSpace \\ \hline
	{% endif %}
%
	{% if result %}
		result &
		\innerCardVSpace{\begin{tabularx}{\attributeCardWidth}{|>{\resultNumberCell}c|>{\varNameCell}M|>{\typeCell}m{\typeWidth}|>{\resultOriginCell}c|Y|} \hline
		{% for entry in result -%}
			$\mathsf{ {{- loop.index -}} }$ & {{ entry.name|trim() }} & {{ entry.type|trim() }} & {% set cat = entry.category|trim() -%}
                {%- if   cat == "aggregated" -%} A
                {%- elif cat == "calculated" -%} C
                {%- elif cat == "meta" -%} M
                {%- else -%} R
                {%- endif %} &
				{{ entry.description }} \\ \hline
		{% endfor -%}
		\end{tabularx}}\innerCardVSpace \\ \hline
	{% endif %}
%
	{% if sort %}
		sort		&
		\innerCardVSpace{\begin{tabularx}{\attributeCardWidth}{|>{\sortNumberCell}c|>{\varNameCell}M|>{\directionCell}c|Y|} \hline
		{% for entry in sort -%}
			$\mathsf{ {{- loop.index -}} }$ & {{ entry.name }} & $\{{ entry.direction }}$ & {{ entry.description }} \\ \hline
		{% endfor -%}
		\end{tabularx}}\innerCardVSpace \\ \hline
	{% endif -%}
%
	{% if limit -%}
		limit & {{ limit }} \\ \hline
	{% endif -%}
%
	{% if choke_points -%}
	CPs &
	\multicolumn{1}{>{\raggedright}l|}{
		{% for choke_point in choke_points -%}
			\chokePoint{ {{- choke_point -}} } {%- if not loop.last %}, {% endif %}
		{% endfor -%}
	} \\ \hline
	{% endif -%}
%
	{% if relevance -%}
	relevance &
		\small {{ relevance }} \\ \hline
	{%- endif -%}
%
\end{tabularx}
\queryCardVSpace

% change \emph back to the old one
\renewcommand{\emph}[1]{\oldemph{{ '{#' }}1}}
